# 스코프 

## 스코프(Scope)

### 개념 

변수의 유효범위  
참조 대상 식별자(identifier, 변수, 함수의 이름 등 어떤 대상을 다른 대상과 구분할 수 있는 유일한 이름)를 찾아내기 위한 규칙 

변수는 `전역` 또는 `코드 블록`(if, for, while, try/catch 등)이나 `함수 내`에 선언하며 코드 블록이나 함수는 중첩될 수 있음  
식별자는 자신이 어디에서 선언됐는지에 따라 자신이 유효한(다른 코드가 자신을 참조할 수 있는) 범위를 가짐 => 스코프   

* 전역에 선언된 변수 : 어디서든 참조 가능  
* 함수 내에서 선언된 변수 : 함수 내부에서만 참조할 수 있고, 그 함수 외부에서는 참조할 수 없음

> 🔖 스코프는 식별자 이름의 충돌을 방지  
> 스코프가 없다면 같은 식별자 이름은 충돌을 일으키므로 프로그램 전체에서 하나밖에 사용할 수 없음  
> Ex. 디렉토리가 없다면 같은 이름을 갖는 파일을 하나밖에 만들 수 없음 

<br>

### 구분

변수는 선언 위치(전역 또는 지역)에 의해 스코프를 가짐  

* 전역에서 선언된 변수는 전역 스코프를 갖는 전역 변수
* 지역(함수 내부)에서 선언된 변수는 지역 스코프를 갖는 지역 변수


#### 전역 스코프 (Global scope)

코드 어디서나 참조 가능 

#### 지역 스코프 (Local scope or Function-level scope)

함수 코드 블록이 만든 스코프  
함수 자신과 하위 함수에서만 참조 가능 


> 📌 모든 변수는 스코프를 가지며, 변수의 관점에서 스코프를 구분하는 2가지 경우 

#### 전역 변수 (Global variable)

전역에서 선언된 변수이며 어디서든 참조 가능

#### 지역 변수 (Local variable)

지역(함수) 내에서 선언된 변수  
그 지역과 그 지역의 하위 지역에서만 참조할 수 있음

<br><br>

## 자바스크립트 스코프의 특징

자바스크립트는 **함수 레벨 스코프**(function-level scope)를 따름 -> 타 언어와 다른 특징  
`함수 레벨 스코프`란, 함수 코드 블록 내에서 선언된 변수는 **함수 코드 블록 내에서만 유효**하고, 함수 외부에서는 유효하지 않다(참조할 수 없다)는 것  
ECMAScript 6에서 도입된 `let`을 사용하면 블록 레벨 스코프 사용 가능 

대부분의 C-family language는 **블록 레벨 스코프**(block-level scope)를 따름 
`블록 레벨 스코프`란, 코드 블록({…})내에서 유효한 스코프

> 🔎 `유효하다` = `참조(접근)할 수 있다`

### 예시 

#### ❌ var는 블록 스코프를 가지지 않음 

```js
var x = 0;
{
  var x = 1;
  console.log(x); // 1
}
console.log(x);   // 1
```

#### ✅ let, const는 블록 스코프를 가짐

```js
let y = 0;
{
  let y = 1;
  console.log(y); // 1
}
console.log(y);   // 0
```

<br><br>

## 전역 스코프(Global scope)

전역에 변수를 선언하면 이 변수는 어디서든지 참조할 수 있는 `전역 스코프`를 갖는 `전역 변수`가 됨  
var 키워드로 선언한 전역 변수는 전역 객체(Global Object) window의 프로퍼티


자바스크립트는 전역에 변수를 선언하기 쉬움 -> 전역 변수를 남발하는 문제 발생   
⚠️ 변수 이름이 중복될 수 있고, 의도치 않은 재할당으로 코드를 예측하기 어렵게 만들기 때문에 전역 변수 사용을 피해야 함 

### 비 블록 레벨 스코프(Non block-level scope)

함수 밖에서 선언된 변수(var)는 코드 블록 내에서 선언되었더라도 모두 전역 스코프를 가짐   

<br><br>

## 참고 사이트 

> https://poiemaweb.com/js-scope  
> https://poiemaweb.com/es6-block-scope
