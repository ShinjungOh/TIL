# Chromatic

## í¬ë¡œë§ˆí‹±

ë¸Œë¼ìš°ì € ì „ì²´ì—ì„œ ê°€ëŠ¥í•œ ëª¨ë“  UI ìƒíƒœë¥¼ ìŠ¤ìº”í•˜ì—¬, ì‹œê°ì  ë° ê¸°ëŠ¥ì  ë²„ê·¸ë¥¼ ì¡ì•„ë‚´ëŠ” ì‹œê°ì  í…ŒìŠ¤íŠ¸, ê²€í†  ë„êµ¬  
ê²€í† ìë¥¼ í• ë‹¹í•˜ê³  ë…¼ì˜ë¥¼ í†µí•´ íŒ€ ìŠ¹ì¸ì„ ê°„ì†Œí™”

<br><br>

## ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•

### í¬ë¡œë§ˆí‹± ì„¤ì¹˜

```
npm install --save-dev chromatic
```

<br>

### ì‚¬ìš©í•˜ê¸°

#### 1. stories íŒŒì¼ ë‚´ìš© ì¶”ê°€ ë˜ëŠ” ë³€ê²½

#### 2. ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ í¬ë¡œë§ˆí‹± ì„¤ì • ì™„ë£Œ

```
npx chromatic --project-token=ë³¸ì¸ì˜_í† í°_ì¶”ê°€
```

![](../Images/í¬ë¡œë§ˆí‹±ì„¤ì •1.png)

* ë²„ì „ë³„ ë¹Œë“œì™€ ë¹Œë“œì—ì„œì˜ ë³€ê²½ì‚¬í•­ì„ ë³¼ ìˆ˜ ìˆìŒ 
* ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ” í¼ë¸”ë¦¬ì‹œëœ ìŠ¤í† ë¦¬ë¶ ì‚¬ì´íŠ¸ ìƒì„±
* âš ï¸ í† í° ìœ ì¶œì— ì£¼ì˜

![](../Images/í¬ë¡œë§ˆí‹±ì„¤ì •2.png)

#### 3. package.json script ëª…ë ¹ì–´ ì¶”ê°€

```
"chromatic": "npx chromatic --project-token=ë³¸ì¸ì˜_í† í°_ì¶”ê°€ --exit-zero-on-changes"
```

* ë³´ì•ˆìƒ í† í°ì´ ìœ ì¶œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¶„ë¦¬í•´ë‘ì–´ì•¼ í•¨ 

> ğŸ’¡ **--exit-zero-on-changes** 
>    
> ì£¼ë¡œ CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì˜µì…˜   
> ë³€ê²½ ì‚¬í•­ì´ ê°ì§€ë˜ì–´ë„ íŒŒì´í”„ë¼ì¸ì´ ì‹¤íŒ¨í•˜ì§€ ì•Šê³  ê³„ì† ì§„í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ëŠ”ë° ë„ì›€ì´ ë¨  
> 
> Chromatic í…ŒìŠ¤íŠ¸ì—ì„œ ë³€ê²½ ì‚¬í•­ì´ ê°ì§€ë˜ì—ˆì„ ë•Œì—ë„ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¢…ë£Œí•˜ë„ë¡ í•˜ëŠ” ì˜µì…˜  
> ì¼ë°˜ì ìœ¼ë¡œëŠ” ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤íŒ¨ë¡œ í‘œì‹œë˜ì–´ CI/CD ë„êµ¬ì—ì„œ ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŒ    
> --exit-zero-on-changes ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ë³€ê²½ ì‚¬í•­ì´ ìˆì–´ë„ ì¢…ë£Œ ì½”ë“œê°€ 0ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ì„±ê³µì ìœ¼ë¡œ ë³´ê³ ë¨   

<br>

### Github Actions CI ì„¤ì • 

```yaml
name: Chromatic Deployment

on:
  push:
    paths:
      - 'src/ui/components/**'

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: v18.14.2

      - name: Install dependencies
        run: npm install

      - name: Build and Deploy to Chromatic for Haru-Hannyan
        run: npm run chromatic 
```

<br>

### ê¹ƒí—ˆë¸Œ ì‹œí¬ë¦¿ìœ¼ë¡œ í† í° ê´€ë¦¬í•˜ê¸°

github secret

1. í•´ë‹¹ ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í† ë¦¬ì˜ `Settings` > `Security` > `Secrets and Variables` > `Actions`ì— ì ‘ì†
2. New repository secret ë²„íŠ¼ í´ë¦­
3. Key-Valueë¡œ í† í° ì…ë ¥
4. í”„ë¡œì íŠ¸ì˜ `chromatic.yml` ëª…ë ¹ì–´ ìˆ˜ì •

```
     - name: Build and Deploy to Chromatic for í”„ë¡œì íŠ¸ ì´ë¦„
       run: npx chromatic --project-token=${{secrets.CHROMATIC_TOKEN}} --exit-zero-on-changes
```

<br><br>

## ì°¸ê³  ì‚¬ì´íŠ¸

> https://www.chromatic.com/  
> https://www.chromatic.com/docs/setup/  
> https://www.chromatic.com/docs/ci/   
> https://www.chromatic.com/docs/github-actions/#project-token-secret  
> https://docs.github.com/ko/actions/security-guides/using-secrets-in-github-actions
