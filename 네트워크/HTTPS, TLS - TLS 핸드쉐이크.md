# HTTPS, TLS 

## TLS, SSL

TLSμ™€ SSLμ€ λ™μΌ (λ…μΉ­μ μ°¨μ΄, κ·Έλλ„ TLSλΌκ³  λ¶€λ¥΄λ” κ²ƒμ΄ λ§μ)

### SSL(Secure Socket Layer)

SSL 1.0, SSL 2.0, SSL 3.0, TLS 1.0, TLS 1.3κΉμ§€ λ²„μ „μ΄ μ¬λΌκ°€λ©° TLSλ΅ λ…μΉ­μ΄ λ³€κ²½

### TLS(TransportLayer Security Protocol)

μ „μ†΅ κ³„μΈµμ—μ„ λ³΄μ•μ„ μ κ³µν•λ” ν”„λ΅ν† μ½  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν†µμ‹ ν•  λ• TLSλ¥Ό ν†µν•΄ μ 3μκ°€ λ©”μ‹μ§€λ¥Ό λ„μ²­ν•κ±°λ‚ λ³€μ΅°ν•μ§€ λ»ν•λ„λ΅ ν•¨ 

<br><br>

## TLS ν•Έλ“μ‰μ΄ν¬

μ–΄λ–»κ² μ•”νΈν™”λ ν†µμ‹ μ„ ν•λ”κ°€μ κΈ°μ΄κ°€ λλ” κ²ƒμ΄ TLS ν•Έλ“μ‰μ΄ν¬ κ³Όμ •   

![](../Images/TLS_ν•Έλ“μ…°μ΄ν¬.png)

* 1-RTTλ΅ μΈμ¦ μ‘μ—… μν–‰
* μΈμ¦ μ‘μ—…μ—μ„ **λΉ„λ€μΉ­ μ•”νΈν™” (κ³µκ°ν‚¤ μ•”νΈν™”)**
    * λΉ„μ©μ΄ λ§μ΄ λ“¤μ–΄μ„(μ—°μ‚° μ‘μ—…μ΄ λ” ν•„μ”ν•κΈ° λ•λ¬Έ) μΈμ¦ ν›„μ— λ€μΉ­ μ•”νΈν™”λ΅ μ „ν™
    * μ—„κ²©ν• μΈμ¦μ΄ ν•„μ”ν•΄μ„ λΉ„λ€μΉ­ μ•”νΈν™” μ‚¬μ©
* μΈμ¦μ΄ λλ‚λ©΄ **λ€μΉ­ μ•”νΈν™”**

<br>

### TLS ν•Έλ“μ‰μ΄ν¬ κ³Όμ •

> π“ μ‚¬μ©ν•  TLSλ²„μ „μ„ μ •ν•κ³ , μ‚¬μ΄νΌμνΈ, μ„λ²„μ κ³µκ°ν‚¤, SSLμΈμ¦μ„λ¥Ό κΈ°λ°μΌλ΅ μΈμ¦μ‘μ—…μ„ μν–‰  
> μ΄ ν›„ λ€μΉ­ μ•”νΈν™”λ¥Ό μ„ν•΄ μ„Έμ…ν‚¤λ¥Ό μƒμ„±  

1. `Client Hello`  
ν΄λΌμ΄μ–ΈνΈλ” TLSλ²„μ „, **μ‚¬μ΄νΌμνΈ**μ™€ ν΄λΌμ΄μ–ΈνΈ λλ¤κ°’(λ¬΄μ‘μ„ λ¬Έμμ—΄), **μ„μ‹ DH λ§¤κ°λ³€μ**λ¥Ό μ„λ²„μ—κ² λ³΄λƒ„


2. `Server Hello, EncryptedExtensions, Certificate, CertificateVerify`  
μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ μµμ…μ„ ν™•μΈ    
μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘μ—μ„ μ§€μ›ν•λ” κ°€μ¥ λ†’μ€ TLS λ²„μ „μ„ μ‹λ³„ν•λ©° κ²°μ •, μ‚¬μ΄νΌμνΈ μ§€μ› μ—¬λ¶€λ¥Ό ν™•μΈ  
κ³µκ°ν‚¤κ°€ ν¬ν•¨λ SSL μΈμ¦μ„, μ„λ²„ λλ¤κ°’(λ¬΄μ‘μ„ λ¬Έμμ—΄), μ„μ‹ DH λ§¤κ°λ³€μλ¥Ό λ³΄λƒ„    
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°κ° μ„λ΅ κµν™ν• DH λ§¤κ°λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ **μ„μ‹ μ•”νΈ ν‚¤(μ„Έμ…ν‚¤)** μƒμ„±


3. `Finished`  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ™€ **μ„Έμ…ν‚¤λ¥Ό κΈ°λ°μΌλ΅ λ€μΉ­ μ•”νΈν™”λ ν†µμ‹ **μ΄ μ‹μ‘( = λ³΄μ•μ„Έμ…μ΄ μ‹μ‘λ¨)
   * ν‚¤κµν™ μ•κ³ λ¦¬μ¦ : λ€ν‘μ μΌλ΅ RSAμ™€ DH  
   DHλ¥Ό κΈ°λ°μΌλ΅ ν•λ©°, **νƒ€μ›κ³΅μ„  DH**λ¥Ό μ‚¬μ©    
   cf. TLS1.3λ²„μ „μ—μ„λ” RSAμ κ²½μ° μ·¨μ•½μ μ΄ μκΈ° λ•λ¬Έμ— κ³µμ‹μ μΌλ΅ μ§€μ›ν•μ§€ μ•μ
   
<br>

### DH λ§¤κ°λ³€μ (DH = Diffie-Hellman)

![](../Images/DHλ§¤κ°λ³€μ.jpeg)

#### Diffie-Hellman μ•κ³ λ¦¬μ¦ 

1. μ„λ΅ κ³µκ°κ°’μ„ κ³µμ 
2. κ°μμ λΉ„λ°€κ°’κ³Ό νΌν•©
3. μ„λ΅ νΌν•©κ°’μ„ κ³µμ 
4. κ°μμ λΉ„λ°€κ°’κ³Ό νΌν•©
5. κ³µν†µμ μ•”νΈν‚¤λ¥Ό μƒμ„±  

#### DH μΆ…λ¥ 

1. DHE : κ·Έλƒ¥ λ””ν”Όν—¬λ§μ„ μ‚¬μ©
2. ECDHE : νƒ€μ›κ³΅μ„  μ•”νΈν™” λ°©λ²•κ³Ό DHλ¥Ό μ„μ 
   * μ£Όλ΅ μ‚¬μ©λ¨ 
   

### νƒ€μ›κ³΅μ„  μ•”νΈν™” λ°©λ²•

![](../Images/νƒ€μ›κ³΅μ„ μ•”νΈν™”.png)

λ³΄μ™„μ„± κ°•ν™” 

κ³΅μ„ μ„ μ‚¬μ©ν•΄ κ°μΈ ν‚¤ λ³΄μ μλ§ μ• μ μλ” νƒ€μ›κ³΅μ„ μ„ κ·Έλ¦° ν›„, μ΄κ²ƒμ„ κΈ°λ°μΌλ΅ κµμ°¨μ μ„ μƒμ„±  
μ΄ κµμ°¨μ μ μλ¥Ό κΈ°λ°μΌλ΅ μ•”νΈλ¥Ό μ„¤μ •ν•λ” λ°©λ²•  


