# HTTPS, TLS 

## TLS, SSL

TLSμ™€ SSLμ€ λ™μΌ (λ…μΉ­μ μ°¨μ΄, κ·Έλλ„ TLSλΌκ³  λ¶€λ¥΄λ” κ²ƒμ΄ λ§μ)

### SSL(Secure Socket Layer)

SSL 1.0, SSL 2.0, SSL 3.0, TLS 1.0, TLS 1.3κΉμ§€ λ²„μ „μ΄ μ¬λΌκ°€λ©° TLSλ΅ λ…μΉ­μ΄ λ³€κ²½

### TLS(TransportLayer Security Protocol)

μ „μ†΅ κ³„μΈµμ—μ„ λ³΄μ•μ„ μ κ³µν•λ” ν”„λ΅ν† μ½  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν†µμ‹ ν•  λ• TLSλ¥Ό ν†µν•΄ μ 3μκ°€ λ©”μ‹μ§€λ¥Ό λ„μ²­ν•κ±°λ‚ λ³€μ΅°ν•μ§€ λ»ν•λ„λ΅ ν•¨ 

<br><br>

## TLS ν•Έλ“μ‰μ΄ν¬

μ–΄λ–»κ² μ•”νΈν™”λ ν†µμ‹ μ„ ν•λ”κ°€μ κΈ°μ΄κ°€ λλ” κ²ƒμ΄ TLS ν•Έλ“μ‰μ΄ν¬ κ³Όμ •   

![](../Images/TLS_ν•Έλ“μ…°μ΄ν¬.png)

* 1-RTTλ΅ μΈμ¦ μ‘μ—… μν–‰
* μΈμ¦ μ‘μ—…μ—μ„ **λΉ„λ€μΉ­ μ•”νΈν™” (κ³µκ°ν‚¤ μ•”νΈν™”)**
    * λΉ„μ©μ΄ λ§μ΄ λ“¤μ–΄μ„(μ—°μ‚° μ‘μ—…μ΄ λ” ν•„μ”ν•κΈ° λ•λ¬Έ) μΈμ¦ ν›„μ— λ€μΉ­ μ•”νΈν™”λ΅ μ „ν™
    * μ—„κ²©ν• μΈμ¦μ΄ ν•„μ”ν•΄μ„ λΉ„λ€μΉ­ μ•”νΈν™” μ‚¬μ©
* μΈμ¦μ΄ λλ‚λ©΄ **λ€μΉ­ μ•”νΈν™”**

<br>

## TLS ν•Έλ“μ‰μ΄ν¬ κ³Όμ •

> π“ μ‚¬μ©ν•  TLSλ²„μ „μ„ μ •ν•κ³ , μ‚¬μ΄νΌμνΈ, μ„λ²„μ κ³µκ°ν‚¤, SSLμΈμ¦μ„λ¥Ό κΈ°λ°μΌλ΅ μΈμ¦μ‘μ—…μ„ μν–‰  
> μ΄ ν›„ λ€μΉ­ μ•”νΈν™”λ¥Ό μ„ν•΄ μ„Έμ…ν‚¤λ¥Ό μƒμ„±  

1. `Client Hello`  
ν΄λΌμ΄μ–ΈνΈλ” TLSλ²„μ „, **μ‚¬μ΄νΌμνΈ**μ™€ ν΄λΌμ΄μ–ΈνΈ λλ¤κ°’(λ¬΄μ‘μ„ λ¬Έμμ—΄), **μ„μ‹ DH λ§¤κ°λ³€μ**λ¥Ό μ„λ²„μ—κ² λ³΄λƒ„


2. `Server Hello, EncryptedExtensions, Certificate, CertificateVerify`  
μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ μµμ…μ„ ν™•μΈ    
μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘μ—μ„ μ§€μ›ν•λ” κ°€μ¥ λ†’μ€ TLS λ²„μ „μ„ μ‹λ³„ν•λ©° κ²°μ •, μ‚¬μ΄νΌμνΈ μ§€μ› μ—¬λ¶€λ¥Ό ν™•μΈ  
κ³µκ°ν‚¤κ°€ ν¬ν•¨λ **SSL μΈμ¦μ„**, μ„λ²„ λλ¤κ°’(λ¬΄μ‘μ„ λ¬Έμμ—΄), μ„μ‹ DH λ§¤κ°λ³€μλ¥Ό λ³΄λƒ„    
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°κ° μ„λ΅ κµν™ν• DH λ§¤κ°λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ **μ„μ‹ μ•”νΈ ν‚¤(μ„Έμ…ν‚¤)** μƒμ„±


3. `Finished`  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ™€ **μ„Έμ…ν‚¤λ¥Ό κΈ°λ°μΌλ΅ λ€μΉ­ μ•”νΈν™”λ ν†µμ‹ **μ΄ μ‹μ‘( = λ³΄μ•μ„Έμ…μ΄ μ‹μ‘λ¨)
   * ν‚¤κµν™ μ•κ³ λ¦¬μ¦ : λ€ν‘μ μΌλ΅ RSAμ™€ DH  
   DHλ¥Ό κΈ°λ°μΌλ΅ ν•λ©°, **νƒ€μ›κ³΅μ„  DH**λ¥Ό μ‚¬μ©    
   cf. TLS1.3λ²„μ „μ—μ„λ” RSAμ κ²½μ° μ·¨μ•½μ μ΄ μκΈ° λ•λ¬Έμ— κ³µμ‹μ μΌλ΅ μ§€μ›ν•μ§€ μ•μ
   
<br><br>

## DH λ§¤κ°λ³€μ (DH = Diffie-Hellman)

![](../Images/DHλ§¤κ°λ³€μ.jpeg)

### Diffie-Hellman μ•κ³ λ¦¬μ¦ 

1. μ„λ΅ κ³µκ°κ°’μ„ κ³µμ 
2. κ°μμ λΉ„λ°€κ°’κ³Ό νΌν•©
3. μ„λ΅ νΌν•©κ°’μ„ κ³µμ 
4. κ°μμ λΉ„λ°€κ°’κ³Ό νΌν•©
5. κ³µν†µμ μ•”νΈν‚¤λ¥Ό μƒμ„±  

### DH μΆ…λ¥ 

1. DHE : κ·Έλƒ¥ λ””ν”Όν—¬λ§μ„ μ‚¬μ©
2. ECDHE : νƒ€μ›κ³΅μ„  μ•”νΈν™” λ°©λ²•κ³Ό DHλ¥Ό μ„μ 
   * μ£Όλ΅ μ‚¬μ©λ¨ 

<br>

## νƒ€μ›κ³΅μ„  μ•”νΈν™” λ°©λ²•

![](../Images/νƒ€μ›κ³΅μ„ μ•”νΈν™”.png)

λ³΄μ™„μ„± κ°•ν™” 

κ³΅μ„ μ„ μ‚¬μ©ν•΄ κ°μΈ ν‚¤ λ³΄μ μλ§ μ• μ μλ” νƒ€μ›κ³΅μ„ μ„ κ·Έλ¦° ν›„, μ΄κ²ƒμ„ κΈ°λ°μΌλ΅ κµμ°¨μ μ„ μƒμ„±  
μ΄ κµμ°¨μ μ μλ¥Ό κΈ°λ°μΌλ΅ μ•”νΈλ¥Ό μ„¤μ •ν•λ” λ°©λ²•  

<br>

## μ‚¬μ΄νΌμνΈ

μ‚¬μ΄νΌ μνΈλ” ν”„λ΅ν† μ½, AEAD μ‚¬μ΄νΌ λ¨λ“, ν•΄μ‹± μ•κ³ λ¦¬μ¦μ΄ λ‚μ—΄λ κ·μ•½  
μ•”νΈμ ν’κµ°μ΄λΌκ³ λ„ λ¶€λ¦„   

TLS1.3λ²„μ „μ—λ” λ‹¤μ„― κ°κ°€ μ΅΄μ¬ - μ·¨μ•½μ μ΄ μ κ±°λ μ ν’κµ° 

* TLS_AES_128_GCM_SHA256  
* TLS_AES_256_GCM_SHA384  
* TLS_CHACHA20_POLY1305_SHA256  
* TLS_AES_128_CCM_SHA256  
* TLS_AES_128_CCM_8_SHA256

> π” TLS_AES_128_GCM_SHA256μ—λ” μ„Έ κ°€μ§€ κ·μ•½μ΄ λ“¤μ–΄ μμμ„ μλ―Έ  
> 
> * TLS : ν”„λ΅ν† μ½
> * AES_128_GCM : AEAD μ‚¬μ΄νΌ λ¨λ“
> * SHA256 :  ν•΄μ‹± μ•κ³ λ¦¬μ¦  

<br>

### AEAD μ‚¬μ΄νΌ λ¨λ“

AEAD(Authenticated Encryption with Associated Data)λ” λ°μ΄ν„° μ•”νΈν™” μ•κ³ λ¦¬μ¦  
AES_128_GCM λ“±μ΄ μ΅΄μ¬  

> EX. AES_128_GCM
>
> 128 λΉ„νΈμ ν‚¤λ¥Ό μ‚¬μ©ν•λ” **ν‘μ¤€ λΈ”λ΅ μ•”νΈν™” κΈ°μ **κ³Ό λ³‘λ ¬ κ³„μ‚°μ— μ©μ΄ν• **μ•”νΈν™” μ•κ³ λ¦¬μ¦ GCM**μ΄ κ²°ν•©λ μ•κ³ λ¦¬μ¦

### ν•΄μ‹± μ•κ³ λ¦¬μ¦

![](../Images/ν•΄μ‹±μ•κ³ λ¦¬μ¦.png)

ν•΄μ‹± μ•κ³ λ¦¬μ¦μ€ λ°μ΄ν„°λ¥Ό μ¶”μ •ν•κΈ° νλ“  λ” μ‘κ³ , μ„μ—¬ μλ” μ΅°κ°μΌλ΅ λ§λ“λ” μ•κ³ λ¦¬μ¦  
SSL/TLSλ” ν•΄μ‹± μ•κ³ λ¦¬μ¦μΌλ΅ SHA-256 μ•κ³ λ¦¬μ¦κ³Ό SHA-384 μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©  

> SHA-256 μ•κ³ λ¦¬μ¦
> 
> SHA-256 μ•κ³ λ¦¬μ¦μ€ κ·Έ μ¤‘ λ§μ΄ μ‚¬μ©λλ” μ•κ³ λ¦¬μ¦   
> ν•΄μ‹ ν•¨μμ κ²°κ΄κ°’μ΄ 256λΉ„νΈμΈ μ•κ³ λ¦¬μ¦μ΄λ©° λΉ„νΈ μ½”μΈμ„ λΉ„λ΅―ν• λ§μ€ λΈ”λ΅μ²΄μΈ μ‹μ¤ν…μ—μ„λ„ μ‚¬μ©

### Q. ν•΄μ‹±μ•κ³ λ¦¬μ¦μ€ TLSμ—μ„ μ–΄λ–»κ² μ‚¬μ©λ κΉ?

μΈμ¦μ„κ°€ μ¬λ°”λ¥Έ μΈμ¦μ„μΈμ§€ ν™•μΈν•  λ• μ „μμ„λ…μ„ μ΄μ©ν•λ”λ° μ΄ λ• ν•΄μ‹± μ•κ³ λ¦¬μ¦μ΄ μ“°μ„  

1. μΈμ¦ μƒμ„±μ‘μ—… : μ „μ μ„λ…μ„ λ§λ“λ”λ° μ„λ…λλ” λ©”μ‹μ§€λ¥Ό ν•΄μ‹±
2. μΈμ¦ ν™•μΈμ‘μ—… : λ©”μ‹μ§€λ¥Ό λ³µνΈν™”ν•΄μ„ ν•΄μ‹λ¥Ό μ„λ΅ λΉ„κµν•΄ μ¬λ°”λ¥Έ λ©”μ‹μ§€μΈμ§€ ν™•μΈ

#### μ „μμ„λ…

μ†΅μ‹ μκ°€ μμ‹ μ μ‹ μ›μ„ μ¦λ…ν•λ” μ μ°¨ λλ” μ •λ³΄

> Ex. λ„¤μ΄λ²„μ—μ„ λ‹¤μ΄λ΅λ“ν• ν”„λ΅κ·Έλ¨μ΄ μ•…μ„±μΈμ§€ μ•„λ‹λ©΄ λ„¤μ΄λ²„μ—μ„ κ³µμ‹μ μΌλ΅ λ‹¤μ΄λ΅λ“ν• ν”„λ΅κ·Έλ¨μΈμ§€ ν™•μΈν•  λ•    
> ν”„λ΅κ·Έλ¨ μ•μ— μ μ‘μ ν‘μ‹λ¥Ό ν•  μ μκ³  μ΄ ν‘μ‹λ” κΈ°μ μ μΈ μ¥μΉλ¥Ό κΈ°λ°μΌλ΅ λμ–΄μμ => μ „μμ„λ…
> 1. μ „μμ„λ…μ„ ν†µν•΄ μΈμ¦μ„μ— μ ν μ£Όμ²΄κ°€ 'μ„λΉ„μ¤ μ κ³µμ'μΈμ§€ ν™•μΈ 
> 2. μΈμ¦μ„μ— κΈ°λ΅λ μ „μμ„λ…μ„ κΈ°λ°μΌλ΅ CAμ κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν•΄μ„ μ§€λ¬Έμ„ μ–»κ³  
> 3. μΈμ¦μ„μ— κΈ°λ΅λ μ •λ³΄λ“¤μ„ ν•΄μ‹ ν•¨μμ— μ…λ ¥ν•μ—¬ ν•΄μ‹λ¥Ό μ–»μ–΄λ‚΄μ„ λ‘ ν•΄μ‹μ μΌμΉ μ—¬λ¶€λ¥Ό ν™•μΈ
> 4. μ΄λ¥Ό ν†µν•΄ μΈμ¦μ„μ μ ν¨μ„±μ„ κ²€μ¦ (λ‘ μ§€λ¬Έμ΄ μΌμΉν•λ‹¤λ©΄ μΈμ¦μ„ μμ²΄κ°€ λ³€μ΅°λ μ μ΄ μ—†λ” κ²ƒμ„ μλ―Έ)
> 
> π’΅ μ ν¨μ„± κ²€μ¦μ΄λ€ μΈμ¦μ„κ°€ λ³€μ΅°λμ§€ μ•μ•κ³ , μΈμ¦μ„κ°€ 'μ„λΉ„μ¤ μ κ³µμ' κ²ƒμ„μ„ ν™•μΈν•λ” μ μ°¨

<br><br>

## μΈμ¦μ„

μΈμ¦μ„λ” μ£Όμ²΄μ™€ κ³µκ°ν‚¤κ°€ μλ” λ°μ΄ν„° νμΌ  

1. μ£Όμ²΄(μΈμ¦μ„ λ°κΈ‰ν• CA, λ„λ©”μΈ, μ›Ήμ‚¬μ΄νΈ μ†μ μ, μΈμ¦μ„ μ†μ μ)
2. κ³µκ°ν‚¤(κ³µκ°ν‚¤, κ³µκ°ν‚¤ μ•”νΈν™” λ°©λ²•)

μμ‹ μ μ›Ήμ‚¬μ΄νΈ μ•μ—μ„ SSL μΈμ¦μ„λ¥Ό λ§λ“¤ μλ„ μμ§€λ§ λ³΄ν†µμ€ μΈμ¦κΈ°κ΄€μΈ CAμ—μ„ λ°κΈ‰ν• SSLμΈμ¦μ„λ¥Ό κΈ°λ°μΌλ΅ μΈμ¦μ‘μ—…μ„ μν–‰  
μ£Όμ²΄λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μλ„ν• μ„λ²„κ°€ λ§λ”μ§€ ν™•μΈν•  λ• μ“°μ΄κ³ ,   
κ³µκ°ν‚¤λ” μ²μ μΈμ¦μ‘μ—…μ„ μν–‰ν•  λ• μ“°μ„

<br>

### CA

μΈμ¦μ„μ μ—­ν• μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μλ„ν• μ„λ²„κ°€ λ§λ”μ§€λ¥Ό λ³΄μ¥ν•λ” μ—­ν•   
μ΄ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ” κΈ°μ—…λ“¤μ„ CA(Certificate Authority)  
μ„λΉ„μ¤μ λ„λ©”μΈ, κ³µκ°ν‚¤μ™€ κ°™μ€ μ •λ³΄λ” μ„λΉ„μ¤κ°€ CAλ΅λ¶€ν„° μΈμ¦μ„λ¥Ό κµ¬μ…ν•  λ• μ μ¶ν•΄μ•Ό ν•¨   

#### λ‹¤μ–‘ν• μ ν•μ μΈμ¦μ„

* λ‹¨μΌ λ„λ©”μΈ : λ‹¨ ν•λ‚μ λ„λ©”μΈ(www.naver.com)μ— μ μ©λλ” μΈμ¦μ„
* μ™€μΌλ“μΉ΄λ“ : λ„λ©”μΈμ ν•μ„ λ„λ©”μΈλ„ ν¬ν•¨ν•λ” μΈμ¦μ„
  * Ex. www.cloudflare.com, blog.cloudflare.com
* λ©€ν‹° λ„λ©”μΈ: λ©€ν‹° λ„λ©”μΈ SSL μΈμ¦μ„λ” κ΄€λ ¨λμ§€ μ•μ€ λ‹¤μμ λ„λ©”μΈμ— μ μ©λ  μ μλ” μΈμ¦μ„ 

<br><br>
